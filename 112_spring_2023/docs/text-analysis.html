<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Text Analysis | COMP/STAT 112: Introduction to Data Science</title>
  <meta name="description" content="This is the class website for Introduction to Data Science at Macalester College for Fall 2022." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Text Analysis | COMP/STAT 112: Introduction to Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/logo.png" />
  <meta property="og:description" content="This is the class website for Introduction to Data Science at Macalester College for Fall 2022." />
  <meta name="github-repo" content="bcheggeseth/112_fall_2022/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Text Analysis | COMP/STAT 112: Introduction to Data Science" />
  
  <meta name="twitter:description" content="This is the class website for Introduction to Data Science at Macalester College for Fall 2022." />
  <meta name="twitter:image" content="/images/logo.png" />




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sql.html"/>
<link rel="next" href="advanced-visualization.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet/leaflet.js"></script>
<link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4/proj4.min.js"></script>
<script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding/leaflet.js"></script>
<script src="libs/leaflet-providers/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
<script src="libs/kePrint/kePrint.js"></script>
<link href="libs/lightable/lightable.css" rel="stylesheet" />
<link href="libs/dygraphs/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs/dygraph-combined.js"></script>
<script src="libs/dygraphs/shapes.js"></script>
<script src="libs/moment/moment.js"></script>
<script src="libs/moment-timezone/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding/dygraphs.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="custom_styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href = "./">COMP/STAT 112: Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="course-schedule.html"><a href="course-schedule.html"><i class="fa fa-check"></i>Course Schedule</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html"><i class="fa fa-check"></i>Learning Goals</a>
<ul>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#general-skills"><i class="fa fa-check"></i>General Skills</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#course-topics"><i class="fa fa-check"></i>Course Topics</a>
<ul>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#foundation"><i class="fa fa-check"></i>Foundation</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-acquisition-cleaning"><i class="fa fa-check"></i>Data Acquisition &amp; Cleaning</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-wrangling"><i class="fa fa-check"></i>Data Wrangling</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-visualization"><i class="fa fa-check"></i>Data Visualization</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-modeling"><i class="fa fa-check"></i>Data Modeling</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Foundation</b></span></li>
<li class="chapter" data-level="1" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html"><i class="fa fa-check"></i><b>1</b> Intro to R, RStudio, and R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#learning-goals-1"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#getting-started-in-rstudio"><i class="fa fa-check"></i>Getting Started in RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#download-r-rstudio"><i class="fa fa-check"></i>Download R &amp; RStudio</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#a-quick-tour-of-rstudio"><i class="fa fa-check"></i>A quick tour of RStudio</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#tidy-data"><i class="fa fa-check"></i>Tidy Data</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#data-basics-in-rstudio"><i class="fa fa-check"></i>Data Basics in RStudio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#r-markdown-and-reproducible-research"><i class="fa fa-check"></i>R Markdown and Reproducible Research</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#practice"><i class="fa fa-check"></i>Practice</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#appendix-r-functions"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#r-as-a-calculator"><i class="fa fa-check"></i>R as a calculator</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#r-basics"><i class="fa fa-check"></i>R Basics</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Visualization</b></span></li>
<li class="chapter" data-level="2" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html"><i class="fa fa-check"></i><b>2</b> Intro to Data Visualization</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#learning-goals-2"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#benefits-of-visualizations"><i class="fa fa-check"></i>Benefits of Visualizations</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#glyphs"><i class="fa fa-check"></i>Glyphs</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#data-glyph"><i class="fa fa-check"></i>Data Glyph</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#components-of-graphics"><i class="fa fa-check"></i>Components of Graphics</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#eye-training-for-the-layered-grammar-of-graphics"><i class="fa fa-check"></i>Eye Training for the Layered Grammar of Graphics</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#glyph-ready-data"><i class="fa fa-check"></i>Glyph-Ready Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#data-visualization-workflow-ggplot"><i class="fa fa-check"></i>Data Visualization Workflow + <code>ggplot</code></a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#layers-building-up-complex-plots"><i class="fa fa-check"></i>Layers – Building up Complex Plots</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#an-example"><i class="fa fa-check"></i>An Example</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#categorical-univariate-visualization"><i class="fa fa-check"></i>Categorical univariate visualization</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#quantitative-univariate-visualization"><i class="fa fa-check"></i>Quantitative univariate visualization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#additional-exercises"><i class="fa fa-check"></i>Additional exercises</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#appendix-r-functions-1"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#basic-r-functions"><i class="fa fa-check"></i>Basic R functions</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#ggplot2-foundation-functions"><i class="fa fa-check"></i>ggplot2 foundation functions</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#more-ggplot2-functions"><i class="fa fa-check"></i>more ggplot2 functions</a></li>
<li class="chapter" data-level="" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#ggplot2-aesthetic-mapping-options"><i class="fa fa-check"></i>ggplot2 aesthetic mapping options</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="effective-visualizations.html"><a href="effective-visualizations.html"><i class="fa fa-check"></i><b>3</b> Effective Visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#learning-goals-3"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#effective-visualizations-1"><i class="fa fa-check"></i>Effective Visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#benefits-of-visualizations-1"><i class="fa fa-check"></i>Benefits of Visualizations</a></li>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#analysis-of-graphics"><i class="fa fa-check"></i>Analysis of Graphics</a></li>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#properties-of-effective-visualizations"><i class="fa fa-check"></i>Properties of Effective Visualizations</a></li>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#basic-rules-for-constructing-graphics"><i class="fa fa-check"></i>Basic Rules for Constructing Graphics</a></li>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#still-to-come"><i class="fa fa-check"></i>Still to Come</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="effective-visualizations.html"><a href="effective-visualizations.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html"><i class="fa fa-check"></i><b>4</b> Bivariate Visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#learning-goals-4"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#bivariate-visualizations-1"><i class="fa fa-check"></i>Bivariate Visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#getting-to-know-the-dataset"><i class="fa fa-check"></i>Getting to know the dataset</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#background-on-visualizing-relationships"><i class="fa fa-check"></i>Background on visualizing relationships</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#visualizing-quantitiative-vs-quantitative-relationships"><i class="fa fa-check"></i>Visualizing quantitiative vs quantitative relationships</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#visualizing-quantitative-vs.-categorical-relationships"><i class="fa fa-check"></i>Visualizing quantitative vs. categorical relationships</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#visualizing-categorical-vs-categorical-relationships"><i class="fa fa-check"></i>Visualizing categorical vs categorical relationships</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#practice-1"><i class="fa fa-check"></i>Practice</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#appendix-r-functions-2"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#data-wrangling-r-functions"><i class="fa fa-check"></i>Data Wrangling R functions</a></li>
<li class="chapter" data-level="" data-path="bivariate-visualizations.html"><a href="bivariate-visualizations.html#ggplot2-foundation-functions-1"><i class="fa fa-check"></i>ggplot2 foundation functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html"><i class="fa fa-check"></i><b>5</b> Multivariate Visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html#learning-goals-5"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html#adding-more-aesthetic-attributes"><i class="fa fa-check"></i>Adding More Aesthetic Attributes</a>
<ul>
<li class="chapter" data-level="" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html#exploring-sat-scores"><i class="fa fa-check"></i>Exploring SAT Scores</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html#other-multivariate-visualization-techniques"><i class="fa fa-check"></i>Other Multivariate Visualization Techniques</a>
<ul>
<li class="chapter" data-level="" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html#heat-maps"><i class="fa fa-check"></i>Heat maps</a></li>
<li class="chapter" data-level="" data-path="multivariate-visualizations.html"><a href="multivariate-visualizations.html#star-plots"><i class="fa fa-check"></i>Star plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="spatial-visualization.html"><a href="spatial-visualization.html"><i class="fa fa-check"></i><b>6</b> Spatial Visualization</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#learning-goals-6"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#plotting-points-on-a-map"><i class="fa fa-check"></i>Plotting Points on a Map</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#starbucks-example"><i class="fa fa-check"></i>Starbucks Example</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#resources"><i class="fa fa-check"></i>Resources</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#exercise-more-with-starbucks"><i class="fa fa-check"></i>Exercise: More with Starbucks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#contour-maps"><i class="fa fa-check"></i>Contour Maps</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#choropleths"><i class="fa fa-check"></i>Choropleths</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#choose-a-map"><i class="fa fa-check"></i>Choose a Map</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#connect-map-idregion-variable-to-data-being-plotted"><i class="fa fa-check"></i>Connect Map ID/Region Variable to Data Being Plotted</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#use-ggplot2-features"><i class="fa fa-check"></i>Use <code>ggplot2</code> Features</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#expand_limits"><i class="fa fa-check"></i><code>expand_limits()</code></a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#theme_map"><i class="fa fa-check"></i><code>theme_map()</code></a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#add-ggplot2-layers"><i class="fa fa-check"></i>Add <code>ggplot2</code> Layers</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#resources-1"><i class="fa fa-check"></i>Resources</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#alternative-methods"><i class="fa fa-check"></i>Alternative Methods</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#exercise-even-more-with-starbucks"><i class="fa fa-check"></i>Exercise: Even More with Starbucks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#dynamnic-maps-with-leaflet"><i class="fa fa-check"></i>Dynamnic Maps with <code>leaflet</code></a>
<ul>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#steps-to-create-a-map"><i class="fa fa-check"></i>Steps to Create a Map</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#creating-a-map-with-markerspoints"><i class="fa fa-check"></i>Creating a Map with Markers/Points</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#choropleth-layers-with-addpolygons"><i class="fa fa-check"></i>Choropleth Layers with <code>addPolygons()</code></a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#resources-2"><i class="fa fa-check"></i>Resources</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#exercise-favorite-places"><i class="fa fa-check"></i>Exercise: Favorite Places</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#appendix-r-functions-3"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#mapping-points-functions"><i class="fa fa-check"></i>Mapping Points Functions</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#contourdensity-mapping-functions"><i class="fa fa-check"></i>Contour/Density Mapping Functions</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#choropleths-mapping-functions"><i class="fa fa-check"></i>Choropleths Mapping Functions</a></li>
<li class="chapter" data-level="" data-path="spatial-visualization.html"><a href="spatial-visualization.html#dynamic-mapping-functions"><i class="fa fa-check"></i>Dynamic Mapping Functions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Data Wrangling</b></span></li>
<li class="chapter" data-level="7" data-path="six-main-verbs.html"><a href="six-main-verbs.html"><i class="fa fa-check"></i><b>7</b> Six Main Verbs</a>
<ul>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#learning-goals-7"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#data-wrangling-introduction"><i class="fa fa-check"></i>Data Wrangling Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#example-us-births"><i class="fa fa-check"></i>Example: US Births</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#tidy-data-1"><i class="fa fa-check"></i>Tidy Data</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#data-verbs"><i class="fa fa-check"></i>Data Verbs</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#manipulating-dates"><i class="fa fa-check"></i>Manipulating Dates</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#exercises-part-1-baby-names"><i class="fa fa-check"></i>Exercises Part 1: Baby Names</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#exercises-part-2-us-births"><i class="fa fa-check"></i>Exercises Part 2: US Births</a>
<ul>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#seasonality"><i class="fa fa-check"></i>Seasonality</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#day-of-the-week"><i class="fa fa-check"></i>Day of the Week</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#holidays"><i class="fa fa-check"></i>Holidays</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#geography"><i class="fa fa-check"></i>Geography</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#superstition"><i class="fa fa-check"></i>Superstition</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#appendix-r-functions-4"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#six-main-verbs-1"><i class="fa fa-check"></i>Six Main Verbs</a></li>
<li class="chapter" data-level="" data-path="six-main-verbs.html"><a href="six-main-verbs.html#logicalboolean-operators"><i class="fa fa-check"></i>Logical/Boolean Operators</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reshaping-data.html"><a href="reshaping-data.html"><i class="fa fa-check"></i><b>8</b> Reshaping Data</a>
<ul>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#learning-goals-8"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#wide-and-long-data-formats"><i class="fa fa-check"></i>Wide and Long Data Formats</a>
<ul>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#wider"><i class="fa fa-check"></i>Wider</a></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#longer"><i class="fa fa-check"></i>Longer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#example-the-daily-show-guests"><i class="fa fa-check"></i>Example: The Daily Show Guests</a>
<ul>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#popular-guests"><i class="fa fa-check"></i>Popular guests</a></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#recreating-a-graphic"><i class="fa fa-check"></i>Recreating a graphic</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#more-exercises-practice-pivoting-longer"><i class="fa fa-check"></i>More Exercises: Practice Pivoting Longer</a></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#appendix-r-functions-5"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#reshaping-functions"><i class="fa fa-check"></i>Reshaping Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html"><i class="fa fa-check"></i><b>9</b> Joining Two Data Frames</a>
<ul>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#learning-goals-9"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#joins"><i class="fa fa-check"></i>Joins</a>
<ul>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#establishing-a-match-between-cases"><i class="fa fa-check"></i>Establishing a match between cases</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#matching"><i class="fa fa-check"></i>Matching</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#mutating-joins"><i class="fa fa-check"></i>Mutating joins</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#filtering-joins"><i class="fa fa-check"></i>Filtering joins</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#more-join-practice"><i class="fa fa-check"></i>More join practice</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#bicycle-use-patterns"><i class="fa fa-check"></i>Bicycle-Use Patterns</a>
<ul>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#warm-up-temporal-patterns"><i class="fa fa-check"></i>Warm-up: Temporal patterns</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#mutating-join-practice-spatial-patterns"><i class="fa fa-check"></i>Mutating join practice: Spatial patterns</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#filtering-join-practice-spatiotemporal-patterns"><i class="fa fa-check"></i>Filtering join practice: Spatiotemporal patterns</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#appendix-r-functions-6"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#mutating-joins-1"><i class="fa fa-check"></i>Mutating Joins</a></li>
<li class="chapter" data-level="" data-path="joining-two-data-frames.html"><a href="joining-two-data-frames.html#filtering-joins-1"><i class="fa fa-check"></i>Filtering Joins</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html"><i class="fa fa-check"></i><b>10</b> Categorical Variables as Factors</a>
<ul>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#learning-goals-10"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#example-grade-distribution"><i class="fa fa-check"></i>Example: Grade Distribution</a>
<ul>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#converting-to-factor"><i class="fa fa-check"></i>Converting to factor</a></li>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#changing-the-order-of-levels"><i class="fa fa-check"></i>Changing the order of levels</a></li>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#changing-the-value-of-levels"><i class="fa fa-check"></i>Changing the value of levels</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#appendix-r-functions-7"><i class="fa fa-check"></i>Appendix: R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#changing-the-order-of-levels-1"><i class="fa fa-check"></i>Changing the order of levels</a></li>
<li class="chapter" data-level="" data-path="categorical-variables-as-factors.html"><a href="categorical-variables-as-factors.html#changing-the-value-of-levels-1"><i class="fa fa-check"></i>Changing the value of levels</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mini-project.html"><a href="mini-project.html"><i class="fa fa-check"></i><b>11</b> Mini-Project</a>
<ul>
<li class="chapter" data-level="" data-path="mini-project.html"><a href="mini-project.html#learning-goals-11"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="mini-project.html"><a href="mini-project.html#data-kiva"><i class="fa fa-check"></i>Data: Kiva</a>
<ul>
<li class="chapter" data-level="" data-path="mini-project.html"><a href="mini-project.html#investigate-the-partners-data-table"><i class="fa fa-check"></i>Investigate the <code>partners</code> Data Table</a></li>
<li class="chapter" data-level="" data-path="mini-project.html"><a href="mini-project.html#investigate-the-loans-data-table"><i class="fa fa-check"></i>Investigate the <code>loans</code> Data Table</a></li>
<li class="chapter" data-level="" data-path="mini-project.html"><a href="mini-project.html#putting-them-together"><i class="fa fa-check"></i>Putting them together</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Data Modeling</b></span></li>
<li class="chapter" data-level="12" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>12</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#learning-goals-12"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#first-steps-of-a-data-analysis"><i class="fa fa-check"></i>First Steps of a Data Analysis</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#understand-the-basic-data"><i class="fa fa-check"></i>Understand the Basic Data</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualize-and-describe-the-data"><i class="fa fa-check"></i>Visualize and Describe the Data</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#formulate-a-research-question"><i class="fa fa-check"></i>Formulate a Research Question</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#examples"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#practice-flight-data"><i class="fa fa-check"></i>Practice: Flight Data</a></li>
</ul></li>
<li class="part"><span><b>V Data Acquisition &amp; Cleaning</b></span></li>
<li class="chapter" data-level="13" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>13</b> Data Import</a>
<ul>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#learning-goals-13"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#finding-importing-and-cleaning-data"><i class="fa fa-check"></i>Finding, Importing, and Cleaning Data</a>
<ul>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#finding-existing-data-sets"><i class="fa fa-check"></i>Finding Existing Data Sets</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#loading-datasets"><i class="fa fa-check"></i>Loading Datasets</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#checking-the-imported-datasets"><i class="fa fa-check"></i>Checking the Imported Datasets</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#cleaning-datasets"><i class="fa fa-check"></i>Cleaning Datasets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#additional-practice"><i class="fa fa-check"></i>Additional Practice</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>14</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#learning-goals-14"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#regular-expressions-and-character-strings"><i class="fa fa-check"></i>Regular Expressions and Character Strings</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#wrangling-with-regular-expressions-in-r"><i class="fa fa-check"></i>Wrangling with Regular Expressions in <code>R</code></a>
<ul>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#search-and-replace-patterns-with-str_replace-or-str_replace_all-stringr"><i class="fa fa-check"></i>Search and replace patterns with <code>str_replace</code> or <code>str_replace_all</code> (<code>stringr</code>)</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#detect-patterns-with-str_detect-stringr"><i class="fa fa-check"></i>Detect patterns with <code>str_detect</code> (<code>stringr</code>)</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#locate-patterns-with-str_locate"><i class="fa fa-check"></i>Locate patterns with <code>str_locate</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#extract-patterns-with-str_extract-and-str_extract_all"><i class="fa fa-check"></i>Extract patterns with <code>str_extract</code> and <code>str_extract_all</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#count-the-number-of-characters-with-str_length"><i class="fa fa-check"></i>Count the number of characters with <code>str_length</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#convert-a-string-to-all-lower-case-letters-with-str_to_lower"><i class="fa fa-check"></i>Convert a string to all lower case letters with <code>str_to_lower</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#split-strings-with-separate"><i class="fa fa-check"></i>Split strings with <code>separate</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#practice-fall-2021-enrollment-exploration"><i class="fa fa-check"></i>Practice: Fall 2021 Enrollment Exploration</a></li>
</ul></li>
<li class="part"><span><b>VI Additional Topics</b></span></li>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html"><i class="fa fa-check"></i>Data Acquisition: Scraping the Web</a>
<ul>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html#learning-goals-15"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html#scraping-data"><i class="fa fa-check"></i>Scraping Data</a>
<ul>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html#finding-css-selectors"><i class="fa fa-check"></i>Finding CSS Selectors</a></li>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html#retrieving-data-using-rvest-and-css-selector"><i class="fa fa-check"></i>Retrieving Data Using <code>rvest</code> and CSS Selector</a></li>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html#web-scraping-in-python"><i class="fa fa-check"></i>Web Scraping in Python</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-acquisition-scraping-the-web.html"><a href="data-acquisition-scraping-the-web.html#additional-practice-analyze-wnba-players"><i class="fa fa-check"></i>Additional Practice: Analyze WNBA Players</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html"><i class="fa fa-check"></i>Public Web APIs</a>
<ul>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#learning-goals-16"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#apis"><i class="fa fa-check"></i>APIs</a></li>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#wrapper-packages"><i class="fa fa-check"></i>Wrapper Packages</a></li>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#accessing-web-apis"><i class="fa fa-check"></i>Accessing Web APIs</a></li>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#web-api-responses"><i class="fa fa-check"></i>Web API Responses</a>
<ul>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#a-note-on-nested-data-frames"><i class="fa fa-check"></i>A Note on Nested Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="public-web-apis.html"><a href="public-web-apis.html#additional-practice-1"><i class="fa fa-check"></i>Additional Practice</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i>SQL</a>
<ul>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#learning-goals-17"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#introduction-to-sql"><i class="fa fa-check"></i>Introduction to SQL</a>
<ul>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#stack-exchange-data-explorer"><i class="fa fa-check"></i>Stack Exchange Data Explorer</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#basic-select-queries"><i class="fa fa-check"></i>Basic Select Queries</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#sql-summarization"><i class="fa fa-check"></i>SQL Summarization</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#sql-joins"><i class="fa fa-check"></i>SQL Joins</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#additional-exercises-1"><i class="fa fa-check"></i>Additional Exercises</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#accessing-sql-databases-from-rstudio"><i class="fa fa-check"></i>Accessing SQL Databases from RStudio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i>Text Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#learning-goals-18"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#introduction-to-text-analysis-in-r"><i class="fa fa-check"></i>Introduction to Text Analysis in R</a>
<ul>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#text-acquisition"><i class="fa fa-check"></i>Text Acquisition</a></li>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#analyzing-single-documents"><i class="fa fa-check"></i>Analyzing Single Documents</a></li>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#comparing-the-text-in-two-or-more-documents"><i class="fa fa-check"></i>Comparing the text in two (or more) documents</a></li>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i>Sentiment Analysis</a></li>
<li class="chapter" data-level="" data-path="text-analysis.html"><a href="text-analysis.html#other-interesting-questions"><i class="fa fa-check"></i>Other Interesting Questions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html"><i class="fa fa-check"></i>Advanced Visualization</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html#network-visualization"><i class="fa fa-check"></i>Network Visualization</a></li>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html#animations-with-gganimate"><i class="fa fa-check"></i>Animations with <code>gganimate</code></a></li>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html#interactive-visualizations"><i class="fa fa-check"></i>Interactive Visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html#htmlwidgets"><i class="fa fa-check"></i>htmlwidgets</a></li>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html#dashboards"><i class="fa fa-check"></i>Dashboards</a></li>
<li class="chapter" data-level="" data-path="advanced-visualization.html"><a href="advanced-visualization.html#shiny"><i class="fa fa-check"></i>Shiny</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html"><i class="fa fa-check"></i>Shiny</a>
<ul>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#learning-goals-19"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#what-is-a-shiny-app"><i class="fa fa-check"></i>What is a Shiny App?</a>
<ul>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#structure-of-a-shiny-app"><i class="fa fa-check"></i>Structure of a Shiny App</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#concept-map"><i class="fa fa-check"></i>Concept Map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#creating-an-app"><i class="fa fa-check"></i>Creating an app</a>
<ul>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#details"><i class="fa fa-check"></i>Details</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#what-is-an-app.r-file"><i class="fa fa-check"></i>What is an app.R file?</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#input-functions"><i class="fa fa-check"></i><code>*Input()</code> functions</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#output-functions"><i class="fa fa-check"></i><code>*Output()</code> functions</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#using-render-functions"><i class="fa fa-check"></i>Using <code>render*()</code> functions</a></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#publishing-your-app"><i class="fa fa-check"></i>Publishing your app</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="shiny-1.html"><a href="shiny-1.html#more-practice"><i class="fa fa-check"></i>More Practice</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="presentation-tools.html"><a href="presentation-tools.html"><i class="fa fa-check"></i>Presentation Tools</a>
<ul>
<li class="chapter" data-level="" data-path="presentation-tools.html"><a href="presentation-tools.html#output-formats"><i class="fa fa-check"></i>Output Formats</a>
<ul>
<li class="chapter" data-level="" data-path="presentation-tools.html"><a href="presentation-tools.html#slides"><i class="fa fa-check"></i>Slides</a></li>
<li class="chapter" data-level="" data-path="presentation-tools.html"><a href="presentation-tools.html#reports-websites"><i class="fa fa-check"></i>Reports / Websites</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">COMP/STAT 112: Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="text-analysis" class="section level1 unnumbered hasAnchor">
<h1>Text Analysis<a href="text-analysis.html#text-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="learning-goals-18" class="section level2 unnumbered hasAnchor">
<h2>Learning Goals<a href="text-analysis.html#learning-goals-18" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Understand the analysis process of decomposing text into tokens and considering word/token frequency</li>
<li>Develop comfort in comparing the text across multiple documents in terms of tf-idf and log odds ratio</li>
<li>Develop comfort in using lexicons to perform sentiment analysis on a document of text</li>
</ul>
</div>
<div id="introduction-to-text-analysis-in-r" class="section level2 unnumbered hasAnchor">
<h2>Introduction to Text Analysis in R<a href="text-analysis.html#introduction-to-text-analysis-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have seen how to manipulate strings with regular expressions. Here, we examine how to analyze longer text documents. Text refers to information composed primarily of words: song lyrics, Tweets, news articles, novels, Wikipedia articles, online forums, and countless other resources.</p>
<p>In <code>R</code> and most other programming languages, text is stored in strings of characters.</p>
<p>There are a variety of common ways to get strings containing the text we want to analyze.</p>
<div id="text-acquisition" class="section level3 unnumbered hasAnchor">
<h3>Text Acquisition<a href="text-analysis.html#text-acquisition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>String Literals</strong></p>
<p>It may be natural to start by declaring an <code>R</code> variable that holds a string. Let’s consider the <a href="https://en.wikipedia.org/wiki/United_States_Declaration_of_Independence">U.S. Declaration of Independence</a>.
Here’s an <code>R</code> variable that contains one of the most memorable sentences in the Declaration of Independence:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="text-analysis.html#cb353-1" aria-hidden="true" tabindex="-1"></a>us_dec_sentence <span class="ot">&lt;-</span> <span class="st">&quot;We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.&quot;</span></span>
<span id="cb353-2"><a href="text-analysis.html#cb353-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb353-3"><a href="text-analysis.html#cb353-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the number of characters in the sentence.</span></span>
<span id="cb353-4"><a href="text-analysis.html#cb353-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(us_dec_sentence)</span></code></pre></div>
<pre><code>## [1] 209</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="text-analysis.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the sentence itself.</span></span>
<span id="cb355-2"><a href="text-analysis.html#cb355-2" aria-hidden="true" tabindex="-1"></a>us_dec_sentence</span></code></pre></div>
<pre><code>## [1] &quot;We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.&quot;</code></pre>
<p>Unfortunately, creating literal string variables like this can become unwieldy for larger texts, or collections of multiple texts.</p>
<p>Using this technique, your <code>R</code> program would be narrowly written to analyze <a href="https://en.wikipedia.org/wiki/Hard_coding"><em>hard-coded</em></a> string variables, and defining those string variables may take up the vast majority of our program’s source code, making it difficult to read.</p>
<p>We will discuss two more flexible ways of getting textual data: reading a <code>.TXT</code> file and accessing a web API.</p>
<div id="reading-.txt-files" class="section level4 unnumbered hasAnchor">
<h4>Reading <code>.txt</code> Files<a href="text-analysis.html#reading-.txt-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The simplest file format for text is a <code>.TXT</code> (or <code>.txt</code>) file. A <code>.txt</code> file contains raw textual data. You can find <code>.txt</code> files by using Google’s <code>filetype:</code> search filter.
Go to <a href="http://google.com" class="uri">http://google.com</a> and type <code>filetype:txt declaration of independence</code> in the search box.</p>
<p>In the results you should see many <code>.txt</code> files containing the U.S. Declaration of Independence.</p>
<p>For example, <a href="https://infamous.net/documents/declaration-of-independence.txt" class="uri">https://infamous.net/documents/declaration-of-independence.txt</a>. We can read this <code>.txt</code> file into <code>R</code> as a string using the <code>readr</code> package.<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a></p>
<p>Because the text is so large, we use the <code>strtrim</code> function to only show the first 500 characters of the text.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="text-analysis.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb357-2"><a href="text-analysis.html#cb357-2" aria-hidden="true" tabindex="-1"></a>us_dec <span class="ot">&lt;-</span> <span class="fu">read_file</span>(<span class="st">&quot;https://infamous.net/documents/declaration-of-independence.txt&quot;</span>)</span>
<span id="cb357-3"><a href="text-analysis.html#cb357-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(us_dec)</span></code></pre></div>
<pre><code>## [1] 9841</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="text-analysis.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strtrim</span>(us_dec, <span class="dv">500</span>)</span></code></pre></div>
<pre><code>## [1] &quot;\n\nTHE DECLARATION OF INDEPENDENCE:\n\n\nIn Congress, July 4, 1776,\nTHE UNANIMOUS DECLARATION OF THE THIRTEEN UNITED STATES OF AMERICA\n\nWhen in the Course of human events, it becomes necessary for one \npeople to dissolve the political bands which have connected them \nwith another, and to assume among the Powers of the earth, the \nseparate and equal station to which the Laws of Nature and of \nNature&#39;s God entitle them, a decent respect to the opinions of \nmankind requires that they should declare the causes which&quot;</code></pre>
<p>Notice all those <code>\n</code> sequences that appear in the string.</p>
<p>These are <em>newline</em> characters that denote the end of a line.</p>
<p>There are a few other <a href="https://en.wikipedia.org/wiki/Escape_character">special characters</a> that you may see. For example, <code>'\t'</code> is a tab.</p>
</div>
<div id="using-web-apis" class="section level4 unnumbered hasAnchor">
<h4>Using Web APIs<a href="text-analysis.html#using-web-apis" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When we want to analyze textual data created on websites or mobile apps such as Facebook and Twitter, we can use web APIs to gather the text. Here is one example from the largest single collection of written knowledge in human history: Wikipedia!</p>
<p>The function below retrieves the text content of a Wikipedia article with a particular title. It uses Wikipedia’s <em>Public API</em> to do so, which enables any computer program to interact with Wikipedia. Wikipedia’s API is convenient for us because it is vast, open, and free. Don’t worry if you don’t follow the details of the code below.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="text-analysis.html#cb361-1" aria-hidden="true" tabindex="-1"></a>GetArticleText <span class="ot">&lt;-</span> <span class="cf">function</span>(langCode, titles) {</span>
<span id="cb361-2"><a href="text-analysis.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Returns the text of the specified article in the specified language</span></span>
<span id="cb361-3"><a href="text-analysis.html#cb361-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-4"><a href="text-analysis.html#cb361-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># An accumulator variable that will hold the text of each article</span></span>
<span id="cb361-5"><a href="text-analysis.html#cb361-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-6"><a href="text-analysis.html#cb361-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create</span></span>
<span id="cb361-7"><a href="text-analysis.html#cb361-7" aria-hidden="true" tabindex="-1"></a>  texts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(titles, <span class="cf">function</span>(t) {</span>
<span id="cb361-8"><a href="text-analysis.html#cb361-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(t)</span>
<span id="cb361-9"><a href="text-analysis.html#cb361-9" aria-hidden="true" tabindex="-1"></a>    article_info <span class="ot">&lt;-</span> <span class="fu">getForm</span>(</span>
<span id="cb361-10"><a href="text-analysis.html#cb361-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="st">&quot;https://&quot;</span>, langCode, <span class="st">&quot;.wikipedia.org/w/api.php&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>),</span>
<span id="cb361-11"><a href="text-analysis.html#cb361-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">action  =</span> <span class="st">&quot;query&quot;</span>,</span>
<span id="cb361-12"><a href="text-analysis.html#cb361-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">prop =</span> <span class="st">&quot;extracts&quot;</span>,</span>
<span id="cb361-13"><a href="text-analysis.html#cb361-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">format  =</span> <span class="st">&quot;json&quot;</span>,</span>
<span id="cb361-14"><a href="text-analysis.html#cb361-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">explaintext =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb361-15"><a href="text-analysis.html#cb361-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">titles  =</span> t</span>
<span id="cb361-16"><a href="text-analysis.html#cb361-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb361-17"><a href="text-analysis.html#cb361-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-18"><a href="text-analysis.html#cb361-18" aria-hidden="true" tabindex="-1"></a>    js <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(article_info)</span>
<span id="cb361-19"><a href="text-analysis.html#cb361-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(js<span class="sc">$</span>query<span class="sc">$</span>pages[[<span class="dv">1</span>]]<span class="sc">$</span>extract)</span>
<span id="cb361-20"><a href="text-analysis.html#cb361-20" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb361-21"><a href="text-analysis.html#cb361-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(texts)</span>
<span id="cb361-22"><a href="text-analysis.html#cb361-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb361-23"><a href="text-analysis.html#cb361-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-24"><a href="text-analysis.html#cb361-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the text for https://en.wikipedia.org/wiki/Macalester_College,</span></span>
<span id="cb361-25"><a href="text-analysis.html#cb361-25" aria-hidden="true" tabindex="-1"></a><span class="co"># https://en.wikipedia.org/wiki/Carleton_College, and https://en.wikipedia.org/wiki/University_of_Minnesota in English (&quot;en&quot;).</span></span>
<span id="cb361-26"><a href="text-analysis.html#cb361-26" aria-hidden="true" tabindex="-1"></a><span class="co"># We could also get the text for the Spanish article (&quot;es&quot;), or German article (&quot;de&quot;)</span></span>
<span id="cb361-27"><a href="text-analysis.html#cb361-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-28"><a href="text-analysis.html#cb361-28" aria-hidden="true" tabindex="-1"></a>school_wiki_titles <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Macalester College&quot;</span>, <span class="st">&quot;Carleton College&quot;</span>, <span class="st">&quot;University of Minnesota&quot;</span>)</span>
<span id="cb361-29"><a href="text-analysis.html#cb361-29" aria-hidden="true" tabindex="-1"></a>school_wiki_text <span class="ot">&lt;-</span> <span class="fu">GetArticleText</span>(<span class="st">&quot;en&quot;</span>, school_wiki_titles)</span></code></pre></div>
<pre><code>## [1] &quot;Macalester College&quot;
## [1] &quot;Carleton College&quot;
## [1] &quot;University of Minnesota&quot;</code></pre>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="text-analysis.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the first 500 characters of the text</span></span>
<span id="cb363-2"><a href="text-analysis.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="fu">strtrim</span>(school_wiki_text, <span class="dv">500</span>)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Macalester College 
## &quot;Macalester College () is a private liberal arts college in Saint Paul, Minnesota. Founded in 1874, Macalester is exclusively an undergraduate four-year institution and enrolled 2,174 students in the fall of 2018 from 50 U.S. states, four U.S territories, the District of Columbia and 97 countries. The college has Scottish roots and emphasizes internationalism and multiculturalism.\n\n\n== History ==\nMacalester College was founded by Rev. Dr. Edward Duffield Neill in 1874 with help from the Presbyterian &quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Carleton College 
##         &quot;Carleton College ( KARL-tin) is a private liberal arts college in Northfield, Minnesota. Founded in 1866, it had 2,105 undergraduate students and 269 faculty members in fall 2016. The 200-acre main campus is between Northfield and the 800-acre Cowling Arboretum, which became part of the campus in the 1920s.Admissions is highly selective with an acceptance rate of 16.5% in 2022, and Carleton is annually ranked near the top in most rankings of liberal arts schools. Carleton is particularly renowne&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        University of Minnesota 
##         &quot;The University of Minnesota, formally the University of Minnesota, Twin Cities, (UMN, the U of M, or Minnesota) is a public land-grant research university in the Twin Cities of Minneapolis and Saint Paul, Minnesota, United States. The Twin Cities campus comprises locations in Minneapolis and Falcon Heights, a suburb of St. Paul, approximately 3 miles (4.8 km) apart. The Twin Cities campus is the oldest and largest in the University of Minnesota system and has the ninth-largest main campus studen&quot;</code></pre>
<p>We’ll analyze these documents further below.</p>
</div>
</div>
<div id="analyzing-single-documents" class="section level3 unnumbered hasAnchor">
<h3>Analyzing Single Documents<a href="text-analysis.html#analyzing-single-documents" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we tried to make a data frame directly out of the text, it would look odd. It contains the text as a single row in a column named “text.” This doesn’t seem any more useful than the original string itself.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="text-analysis.html#cb365-1" aria-hidden="true" tabindex="-1"></a>us_dec_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">title =</span> <span class="st">&quot;Declaration of Independence&quot;</span>, <span class="at">text =</span> us_dec)</span>
<span id="cb365-2"><a href="text-analysis.html#cb365-2" aria-hidden="true" tabindex="-1"></a>us_dec_df</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   title                       text                                                           
##   &lt;chr&gt;                       &lt;chr&gt;                                                          
## 1 Declaration of Independence &quot;\n\nTHE DECLARATION OF INDEPENDENCE:\n\n\nIn Congress, July 4…</code></pre>
<div id="unnesting-tokens" class="section level4 unnumbered hasAnchor">
<h4>Unnesting Tokens<a href="text-analysis.html#unnesting-tokens" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We need to restructure the text into components that can be easily analyzed.</p>
<p>We will use two units of data:</p>
<ul>
<li>A <strong>token</strong> is the smallest textual information unit we wish to measure, typically a word.</li>
<li>A <strong>document</strong> is a collection of tokens.</li>
</ul>
<p>For our example here, the Declaration of Independence is the document, and a word is the token. However, a document could be a tweet, a novel chapter, a Wikipedia article, or anything else that seems interesting. Other possibilities for tokens include sentences, lines, paragraphs, characters, <a href="https://en.wikipedia.org/wiki/N-gram">ngrams</a>, and more.<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a></p>
<p>Later on, we will also give an example of how to perform textual analyses comparing two or more documents.</p>
<p>We will be using the tidy text format, which has one row for each unit of analysis. Our work will focus on word-level analysis within each document, so each row will contain a document and word.</p>
<p>TidyText’s <code>unnest_tokens</code> function takes a data frame containing one row per document and breaks it into a data frame containing one row per token.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="text-analysis.html#cb367-1" aria-hidden="true" tabindex="-1"></a>tidy_us_dec <span class="ot">&lt;-</span> us_dec_df <span class="sc">%&gt;%</span></span>
<span id="cb367-2"><a href="text-analysis.html#cb367-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text)</span>
<span id="cb367-3"><a href="text-analysis.html#cb367-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb367-4"><a href="text-analysis.html#cb367-4" aria-hidden="true" tabindex="-1"></a>tidy_us_dec</span></code></pre></div>
<pre><code>## # A tibble: 1,539 × 2
##    title                       word        
##    &lt;chr&gt;                       &lt;chr&gt;       
##  1 Declaration of Independence the         
##  2 Declaration of Independence declaration 
##  3 Declaration of Independence of          
##  4 Declaration of Independence independence
##  5 Declaration of Independence in          
##  6 Declaration of Independence congress    
##  7 Declaration of Independence july        
##  8 Declaration of Independence 4           
##  9 Declaration of Independence 1776        
## 10 Declaration of Independence the         
## # … with 1,529 more rows</code></pre>
<p>Note that because we only have one document, the initial data frame (<code>us_dec_df</code>) is just one row and the tidy text data frame (<code>tidy_us_dec</code>) has the same <code>title</code> for each row.</p>
<p>Later on we will analyze more than one document and these columns can change.</p>
<p>We can now analyze this tidy text data frame. For example, we can determine the total number of words.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="text-analysis.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(tidy_us_dec)</span></code></pre></div>
<pre><code>## [1] 1539</code></pre>
<p>We can also find the most frequently used words by using dplyr’s <code>count</code> function, which creates a frequency table for (in our case) words:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="text-analysis.html#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and display frequency count table</span></span>
<span id="cb371-2"><a href="text-analysis.html#cb371-2" aria-hidden="true" tabindex="-1"></a>all_us_dec_counts <span class="ot">&lt;-</span> tidy_us_dec <span class="sc">%&gt;%</span></span>
<span id="cb371-3"><a href="text-analysis.html#cb371-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb371-4"><a href="text-analysis.html#cb371-4" aria-hidden="true" tabindex="-1"></a>all_us_dec_counts</span></code></pre></div>
<pre><code>## # A tibble: 674 × 2
##    word      n
##    &lt;chr&gt; &lt;int&gt;
##  1 the      84
##  2 of       83
##  3 to       67
##  4 and      58
##  5 for      28
##  6 our      26
##  7 has      20
##  8 in       20
##  9 their    20
## 10 he       19
## # … with 664 more rows</code></pre>
<p>We can count the rows in this data frame to determine how many different unique words appear in the document.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="text-analysis.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(all_us_dec_counts)</span></code></pre></div>
<pre><code>## [1] 674</code></pre>
</div>
<div id="stop-words" class="section level4 unnumbered hasAnchor">
<h4>Stop Words<a href="text-analysis.html#stop-words" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Notice that the most frequent words are common words that are present in any document and not particularly descriptive of the topic of the document.
These common words are called <strong>stop words</strong>, and they are typically removed from textual analysis.</p>
<p>TidyText provides a built in set of 1,149 different stop words.
We can load the dataset and use <code>anti_join</code> to remove rows associated with words in the dataset.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="text-analysis.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load stop words dataset and display it</span></span>
<span id="cb375-2"><a href="text-analysis.html#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(stop_words)</span>
<span id="cb375-3"><a href="text-analysis.html#cb375-3" aria-hidden="true" tabindex="-1"></a>stop_words</span></code></pre></div>
<pre><code>## # A tibble: 1,149 × 2
##    word        lexicon
##    &lt;chr&gt;       &lt;chr&gt;  
##  1 a           SMART  
##  2 a&#39;s         SMART  
##  3 able        SMART  
##  4 about       SMART  
##  5 above       SMART  
##  6 according   SMART  
##  7 accordingly SMART  
##  8 across      SMART  
##  9 actually    SMART  
## 10 after       SMART  
## # … with 1,139 more rows</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="text-analysis.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and display frequency count table after removing stop words from the dataset</span></span>
<span id="cb377-2"><a href="text-analysis.html#cb377-2" aria-hidden="true" tabindex="-1"></a>us_dec_counts <span class="ot">&lt;-</span> tidy_us_dec <span class="sc">%&gt;%</span></span>
<span id="cb377-3"><a href="text-analysis.html#cb377-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span></span>
<span id="cb377-4"><a href="text-analysis.html#cb377-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb377-5"><a href="text-analysis.html#cb377-5" aria-hidden="true" tabindex="-1"></a>us_dec_counts</span></code></pre></div>
<pre><code>## # A tibble: 525 × 2
##    word           n
##    &lt;chr&gt;      &lt;int&gt;
##  1 people        10
##  2 laws           9
##  3 government     6
##  4 john           6
##  5 thomas         6
##  6 william        6
##  7 free           5
##  8 george         5
##  9 powers         5
## 10 time           5
## # … with 515 more rows</code></pre>
<p><strong>Word Clouds</strong></p>
<p>A <a href="https://georeferenced.wordpress.com/2013/01/15/rwordcloud/">word cloud</a> is a visualization of the most frequent words in the dataset:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="text-analysis.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb379-2"><a href="text-analysis.html#cb379-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb379-3"><a href="text-analysis.html#cb379-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show a word cloud with some customized options</span></span>
<span id="cb379-4"><a href="text-analysis.html#cb379-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb379-5"><a href="text-analysis.html#cb379-5" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(us_dec_counts<span class="sc">$</span>word, <span class="co"># column of words</span></span>
<span id="cb379-6"><a href="text-analysis.html#cb379-6" aria-hidden="true" tabindex="-1"></a>  us_dec_counts<span class="sc">$</span>n, <span class="co"># column of frequencies</span></span>
<span id="cb379-7"><a href="text-analysis.html#cb379-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="fl">0.2</span>), <span class="co"># range of font sizes of words</span></span>
<span id="cb379-8"><a href="text-analysis.html#cb379-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">min.freq =</span> <span class="dv">2</span>, <span class="co"># minimum word frequency to show</span></span>
<span id="cb379-9"><a href="text-analysis.html#cb379-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">max.words =</span> <span class="dv">200</span>, <span class="co"># show the 200 most frequent words</span></span>
<span id="cb379-10"><a href="text-analysis.html#cb379-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">random.order =</span> <span class="cn">FALSE</span>, <span class="co"># position the most popular words first</span></span>
<span id="cb379-11"><a href="text-analysis.html#cb379-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>) <span class="co"># color palette</span></span>
<span id="cb379-12"><a href="text-analysis.html#cb379-12" aria-hidden="true" tabindex="-1"></a>) </span></code></pre></div>
<p><img src="stat112_manual_files/figure-html/unnamed-chunk-414-1.png" width="576" /></p>
</div>
</div>
<div id="comparing-the-text-in-two-or-more-documents" class="section level3 unnumbered hasAnchor">
<h3>Comparing the text in two (or more) documents<a href="text-analysis.html#comparing-the-text-in-two-or-more-documents" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s now create a TidyText data frame with the three Wikipedia documents we collected above via the API. Remember that the TidyText data frame has one row for each word.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="text-analysis.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the three-row original data frame</span></span>
<span id="cb380-2"><a href="text-analysis.html#cb380-2" aria-hidden="true" tabindex="-1"></a>text_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">article =</span> school_wiki_titles, <span class="at">text =</span> school_wiki_text)</span>
<span id="cb380-3"><a href="text-analysis.html#cb380-3" aria-hidden="true" tabindex="-1"></a>text_df</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   article                 text                                                               
##   &lt;chr&gt;                   &lt;chr&gt;                                                              
## 1 Macalester College      &quot;Macalester College () is a private liberal arts college in Saint …
## 2 Carleton College        &quot;Carleton College ( KARL-tin) is a private liberal arts college in…
## 3 University of Minnesota &quot;The University of Minnesota, formally the University of Minnesota…</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="text-analysis.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unnest the data frame so each row corresponds to a single word in a single document.</span></span>
<span id="cb382-2"><a href="text-analysis.html#cb382-2" aria-hidden="true" tabindex="-1"></a>tidy_df <span class="ot">&lt;-</span> text_df <span class="sc">%&gt;%</span></span>
<span id="cb382-3"><a href="text-analysis.html#cb382-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text)</span>
<span id="cb382-4"><a href="text-analysis.html#cb382-4" aria-hidden="true" tabindex="-1"></a>tidy_df</span></code></pre></div>
<pre><code>## # A tibble: 15,516 × 2
##    article            word      
##    &lt;chr&gt;              &lt;chr&gt;     
##  1 Macalester College macalester
##  2 Macalester College college   
##  3 Macalester College is        
##  4 Macalester College a         
##  5 Macalester College private   
##  6 Macalester College liberal   
##  7 Macalester College arts      
##  8 Macalester College college   
##  9 Macalester College in        
## 10 Macalester College saint     
## # … with 15,506 more rows</code></pre>
<div id="side-by-side-word-clouds" class="section level4 unnumbered hasAnchor">
<h4>Side-by-Side Word Clouds<a href="text-analysis.html#side-by-side-word-clouds" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="text-analysis.html#cb384-1" aria-hidden="true" tabindex="-1"></a>macalester_counts <span class="ot">&lt;-</span> tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb384-2"><a href="text-analysis.html#cb384-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(article <span class="sc">==</span> <span class="st">&quot;Macalester College&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb384-3"><a href="text-analysis.html#cb384-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span></span>
<span id="cb384-4"><a href="text-analysis.html#cb384-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb384-5"><a href="text-analysis.html#cb384-5" aria-hidden="true" tabindex="-1"></a>macalester_counts</span></code></pre></div>
<pre><code>## # A tibble: 1,200 × 2
##    word           n
##    &lt;chr&gt;      &lt;int&gt;
##  1 macalester    82
##  2 students      33
##  3 college       28
##  4 campus        24
##  5 student       21
##  6 minnesota     19
##  7 house         16
##  8 hall          14
##  9 mac           14
## 10 arts          13
## # … with 1,190 more rows</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="text-analysis.html#cb386-1" aria-hidden="true" tabindex="-1"></a>umn_counts <span class="ot">&lt;-</span> tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb386-2"><a href="text-analysis.html#cb386-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(article <span class="sc">==</span> <span class="st">&quot;University of Minnesota&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb386-3"><a href="text-analysis.html#cb386-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span></span>
<span id="cb386-4"><a href="text-analysis.html#cb386-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb386-5"><a href="text-analysis.html#cb386-5" aria-hidden="true" tabindex="-1"></a>umn_counts</span></code></pre></div>
<pre><code>## # A tibble: 1,911 × 2
##    word           n
##    &lt;chr&gt;      &lt;int&gt;
##  1 university    98
##  2 minnesota     79
##  3 campus        68
##  4 hall          36
##  5 school        35
##  6 students      35
##  7 student       33
##  8 college       23
##  9 bank          21
## 10 center        21
## # … with 1,901 more rows</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="text-analysis.html#cb388-1" aria-hidden="true" tabindex="-1"></a>carleton_counts <span class="ot">&lt;-</span> tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb388-2"><a href="text-analysis.html#cb388-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(article <span class="sc">==</span> <span class="st">&quot;Carleton College&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb388-3"><a href="text-analysis.html#cb388-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span></span>
<span id="cb388-4"><a href="text-analysis.html#cb388-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb388-5"><a href="text-analysis.html#cb388-5" aria-hidden="true" tabindex="-1"></a>carleton_counts</span></code></pre></div>
<pre><code>## # A tibble: 1,406 × 2
##    word         n
##    &lt;chr&gt;    &lt;int&gt;
##  1 carleton    68
##  2 college     42
##  3 students    39
##  4 hall        26
##  5 campus      20
##  6 national    17
##  7 student     17
##  8 arts        14
##  9 built       13
## 10 liberal     13
## # … with 1,396 more rows</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="text-analysis.html#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(macalester_counts<span class="sc">$</span>word, macalester_counts<span class="sc">$</span>n,</span>
<span id="cb390-2"><a href="text-analysis.html#cb390-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">max.words =</span> <span class="dv">200</span>, <span class="at">random.order =</span> <span class="cn">FALSE</span>, <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb390-3"><a href="text-analysis.html#cb390-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb390-4"><a href="text-analysis.html#cb390-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(umn_counts<span class="sc">$</span>word, umn_counts<span class="sc">$</span>n,</span>
<span id="cb390-5"><a href="text-analysis.html#cb390-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">max.words =</span> <span class="dv">200</span>, <span class="at">random.order =</span> <span class="cn">FALSE</span>, <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb390-6"><a href="text-analysis.html#cb390-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb390-7"><a href="text-analysis.html#cb390-7" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(carleton_counts<span class="sc">$</span>word, carleton_counts<span class="sc">$</span>n,</span>
<span id="cb390-8"><a href="text-analysis.html#cb390-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">max.words =</span> <span class="dv">200</span>, <span class="at">random.order =</span> <span class="cn">FALSE</span>, <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb390-9"><a href="text-analysis.html#cb390-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="stat112_manual_files/figure-html/unnamed-chunk-418-1.png" width="384" /><img src="stat112_manual_files/figure-html/unnamed-chunk-418-2.png" width="384" /><img src="stat112_manual_files/figure-html/unnamed-chunk-418-3.png" width="384" /></p>
<p><strong>Brainstorm</strong></p>
<p>How do we compare multiple documents quantitatively?</p>
<div class="exercise">
<p><span id="exr:unnamed-chunk-419" class="exercise"><strong>Exercise 14.32  </strong></span>Brainstorm a metric for comparing the relative frequency/importance of different words in two or more documents. What factors might you account for?</p>
</div>
</div>
<div id="term-frequency---inverse-document-frequency" class="section level4 unnumbered hasAnchor">
<h4>Term Frequency - Inverse Document Frequency<a href="text-analysis.html#term-frequency---inverse-document-frequency" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To compare the prevalence of certain words in one document relative to another document, we could just count the occurrences. However, the documents may be different lengths, meaning that many more words might occur more often in the longer document. There are different ways to account for this, but one of the most common is <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">term frequency - inverse document frequency</a>.</p>
<ul>
<li>The <em>term frequency</em> aims to capture how frequently a word appears in each document. There are different ways to measure this, including a raw count, logarithmically scaled (1 + log of the raw count), or Boolean (either 1 or 0 depending on whether the word occurs).</li>
<li>The <em>inverse document frequency</em> aims to capture how common the word is across documents. It is
<span class="math display">\[\log\left(\frac{N}{|\{doc: word \in doc\}|}\right),\]</span>
where <span class="math inline">\(N\)</span> is the number of documents, and the denominator of the fraction is the number of documents in which the selected word appears. Thus, if the word appears in all documents under consideration, the idf score is equal to log(1)=0.</li>
<li>The <em>td-idf score</em> is then the product of the term frequency and the inverse document frequency.</li>
</ul>
<p>We’ll use the <code>bind_tf_idf</code> command from the <code>tidytext</code> library. Its default measure for term frequency is the raw count of a given word divided by the total number of words in the document. Let’s start by computing the thirty-five document-word pairs with the highest tf-idf scores:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="text-analysis.html#cb391-1" aria-hidden="true" tabindex="-1"></a>tfidf_analysis <span class="ot">&lt;-</span> tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb391-2"><a href="text-analysis.html#cb391-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(article, word) <span class="sc">%&gt;%</span></span>
<span id="cb391-3"><a href="text-analysis.html#cb391-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_tf_idf</span>(word, article, n) <span class="sc">%&gt;%</span></span>
<span id="cb391-4"><a href="text-analysis.html#cb391-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(tf_idf))</span></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-421">Table 14.2: </span>The thirty-five document-word pairs with the highest tf-idf scores.
</caption>
<thead>
<tr>
<th style="text-align:left;">
article
</th>
<th style="text-align:left;">
word
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
tf
</th>
<th style="text-align:right;">
idf
</th>
<th style="text-align:right;">
tf_idf
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
macalester
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
0.0226582
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0248926
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
carleton
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
0.0147698
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0162262
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
mac
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0.0038685
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0042500
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
gophers
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
0.0028795
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0031634
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
bust
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0.0026064
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0028635
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
golden
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.0023310
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0025609
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
cowling
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.0021720
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0023862
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
arboretum
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.0019548
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0021476
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
schiller
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.0019548
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0021476
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
engagement
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.0019342
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0021250
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
carleton’s
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.0017376
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0019090
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
goodsell
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.0017376
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0019090
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
northfield
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.0017376
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0019090
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
civic
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0016579
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0018214
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
fossil
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0016579
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0018214
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
scots
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0016579
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0018214
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
house
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0.0044211
</td>
<td style="text-align:right;">
0.4054651
</td>
<td style="text-align:right;">
0.0017926
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
frisbee
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.0015204
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0016703
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
ultimate
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.0015204
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0016703
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
mall
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0.0015083
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0016570
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
commitment
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0013816
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0015178
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
friendly
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0013816
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0015178
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
macalester’s
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0013816
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0015178
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
summit
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0013816
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0015178
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
wallace
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.0013816
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0015178
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
gopher
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.0013712
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0015064
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
sustainability
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0.0035922
</td>
<td style="text-align:right;">
0.4054651
</td>
<td style="text-align:right;">
0.0014565
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
acre
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0013032
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0014317
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
watson
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0013032
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0014317
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
big
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.0012341
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0013558
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
area
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
0.0031537
</td>
<td style="text-align:right;">
0.4054651
</td>
<td style="text-align:right;">
0.0012787
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
environmental
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.0011053
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0012143
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
lgbtq
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.0011053
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0012143
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
presbyterian
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.0011053
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0012143
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
sophomores
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.0011053
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0012143
</td>
</tr>
</tbody>
</table>
<p>Here is a graphic with the same data:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="text-analysis.html#cb392-1" aria-hidden="true" tabindex="-1"></a>tfidf_analysis <span class="sc">%&gt;%</span></span>
<span id="cb392-2"><a href="text-analysis.html#cb392-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">factor</span>(word, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(word)))) <span class="sc">%&gt;%</span></span>
<span id="cb392-3"><a href="text-analysis.html#cb392-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">35</span>) <span class="sc">%&gt;%</span></span>
<span id="cb392-4"><a href="text-analysis.html#cb392-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(word, tf_idf, <span class="at">fill =</span> article)) <span class="sc">+</span></span>
<span id="cb392-5"><a href="text-analysis.html#cb392-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb392-6"><a href="text-analysis.html#cb392-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;tf-idf&quot;</span>) <span class="sc">+</span></span>
<span id="cb392-7"><a href="text-analysis.html#cb392-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="stat112_manual_files/figure-html/unnamed-chunk-422-1.png" width="672" /></p>
<p>Next, let’s say we want to determine which school is the most relevant to the query “internationalism, multiculturalism, and service to society.”</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="text-analysis.html#cb393-1" aria-hidden="true" tabindex="-1"></a>target_words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;internationalism&quot;</span>, <span class="st">&quot;multiculturalism&quot;</span>, <span class="st">&quot;service&quot;</span>, <span class="st">&quot;society&quot;</span>)</span>
<span id="cb393-2"><a href="text-analysis.html#cb393-2" aria-hidden="true" tabindex="-1"></a>mission <span class="ot">&lt;-</span> tfidf_analysis <span class="sc">%&gt;%</span></span>
<span id="cb393-3"><a href="text-analysis.html#cb393-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">%in%</span> target_words)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
article
</th>
<th style="text-align:left;">
word
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
tf
</th>
<th style="text-align:right;">
idf
</th>
<th style="text-align:right;">
tf_idf
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
society
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.0008290
</td>
<td style="text-align:right;">
0.4054651
</td>
<td style="text-align:right;">
0.0003361
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
internationalism
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0002763
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0003036
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
multiculturalism
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0002763
</td>
<td style="text-align:right;">
1.0986123
</td>
<td style="text-align:right;">
0.0003036
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
society
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0002172
</td>
<td style="text-align:right;">
0.4054651
</td>
<td style="text-align:right;">
0.0000881
</td>
</tr>
<tr>
<td style="text-align:left;">
Carleton College
</td>
<td style="text-align:left;">
service
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.0008688
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
Macalester College
</td>
<td style="text-align:left;">
service
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0002763
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Minnesota
</td>
<td style="text-align:left;">
service
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.0012341
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
</tbody>
</table>
</div>
<div id="log-odds-ratio" class="section level4 unnumbered hasAnchor">
<h4>Log Odds Ratio<a href="text-analysis.html#log-odds-ratio" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Another metric for comparing the frequency of different words in two documents is the log odds ratio:</p>
<p><span class="math display">\[\log\left(\frac{\left(\frac{n+1}{total+1}\right)_{\hbox{doc1}}}{\left(\frac{n+1}{total+1}\right)_{\hbox{doc2}}} \right),\]</span>
where <span class="math inline">\(n\)</span> is the number of times the word appears and <span class="math inline">\(total\)</span> is the total number of words in the document.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="text-analysis.html#cb394-1" aria-hidden="true" tabindex="-1"></a>total.mac <span class="ot">&lt;-</span> <span class="fu">nrow</span>(<span class="fu">filter</span>(tidy_df, article <span class="sc">==</span> <span class="st">&quot;Macalester College&quot;</span>))</span>
<span id="cb394-2"><a href="text-analysis.html#cb394-2" aria-hidden="true" tabindex="-1"></a>total.carleton <span class="ot">&lt;-</span> <span class="fu">nrow</span>(<span class="fu">filter</span>(tidy_df, article <span class="sc">==</span> <span class="st">&quot;Carleton College&quot;</span>))</span>
<span id="cb394-3"><a href="text-analysis.html#cb394-3" aria-hidden="true" tabindex="-1"></a>logratios <span class="ot">&lt;-</span> macalester_counts <span class="sc">%&gt;%</span></span>
<span id="cb394-4"><a href="text-analysis.html#cb394-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(carleton_counts, <span class="at">by =</span> <span class="st">&quot;word&quot;</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;.mac&quot;</span>, <span class="st">&quot;.carleton&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb394-5"><a href="text-analysis.html#cb394-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">n.mac =</span> <span class="dv">0</span>, <span class="at">n.carleton =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb394-6"><a href="text-analysis.html#cb394-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n.total =</span> n.mac <span class="sc">+</span> n.carleton) <span class="sc">%&gt;%</span></span>
<span id="cb394-7"><a href="text-analysis.html#cb394-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n.total <span class="sc">&gt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb394-8"><a href="text-analysis.html#cb394-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">logodds.mac =</span> <span class="fu">log</span>(((n.mac <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">/</span> (total.mac <span class="sc">+</span> <span class="dv">1</span>)) <span class="sc">/</span> ((n.carleton <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">/</span> (total.carleton <span class="sc">+</span> <span class="dv">1</span>))))</span></code></pre></div>
<p>Which words appear at roughly equal frequencies?</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="text-analysis.html#cb395-1" aria-hidden="true" tabindex="-1"></a>logratios <span class="sc">%&gt;%</span></span>
<span id="cb395-2"><a href="text-analysis.html#cb395-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">abs</span>(logodds.mac)) <span class="sc">%&gt;%</span></span>
<span id="cb395-3"><a href="text-analysis.html#cb395-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code></pre></div>
<pre><code>## # A tibble: 20 × 5
##    word            n.mac n.carleton n.total logodds.mac
##    &lt;chr&gt;           &lt;int&gt;      &lt;int&gt;   &lt;int&gt;       &lt;dbl&gt;
##  1 programs            6          8      14     -0.0106
##  2 colleges            7          9      16      0.0175
##  3 championship        3          4       7      0.0175
##  4 president           5          7      12     -0.0470
##  5 won                 5          7      12     -0.0470
##  6 1964                2          3       5     -0.0470
##  7 2019                2          3       5     -0.0470
##  8 department          2          3       5     -0.0470
##  9 intercollegiate     2          3       5     -0.0470
## 10 life                2          3       5     -0.0470
## 11 local               2          3       5     -0.0470
## 12 main                2          3       5     -0.0470
## 13 official            2          3       5     -0.0470
## 14 paul                2          3       5     -0.0470
## 15 popular             2          3       5     -0.0470
## 16 summer              2          3       5     -0.0470
## 17 times               2          3       5     -0.0470
## 18 universities        2          3       5     -0.0470
## 19 2011                4          5       9      0.0583
## 20 fall                4          5       9      0.0583</code></pre>
<p>What are the most distinctive words?</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="text-analysis.html#cb397-1" aria-hidden="true" tabindex="-1"></a>logratios <span class="sc">%&gt;%</span></span>
<span id="cb397-2"><a href="text-analysis.html#cb397-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(logodds.mac <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb397-3"><a href="text-analysis.html#cb397-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">15</span>, <span class="fu">abs</span>(logodds.mac)) <span class="sc">%&gt;%</span></span>
<span id="cb397-4"><a href="text-analysis.html#cb397-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb397-5"><a href="text-analysis.html#cb397-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, logodds.mac)) <span class="sc">%&gt;%</span></span>
<span id="cb397-6"><a href="text-analysis.html#cb397-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(word, logodds.mac, <span class="at">fill =</span> logodds.mac <span class="sc">&lt;</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb397-7"><a href="text-analysis.html#cb397-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb397-8"><a href="text-analysis.html#cb397-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb397-9"><a href="text-analysis.html#cb397-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log odds ratio (Mac/Carleton)&quot;</span>) <span class="sc">+</span></span>
<span id="cb397-10"><a href="text-analysis.html#cb397-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Macalester&quot;</span>, <span class="st">&quot;Carleton&quot;</span>))</span></code></pre></div>
<p><img src="stat112_manual_files/figure-html/unnamed-chunk-427-1.png" width="960" /></p>
</div>
</div>
<div id="sentiment-analysis" class="section level3 unnumbered hasAnchor">
<h3>Sentiment Analysis<a href="text-analysis.html#sentiment-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We often want to understand whether text conveys certain characteristics. For example, is Macalester’s mission statement more happy, sad, or angry than that of the University of Minnesota?</p>
<p>A common way of doing this is by using a word dictionary that contains a list of words with the characteristics we are seeking (e.g., a list of words that are happy, sad, or angry). We can then measure how often words with each characteristic appear in the text. These word dictionaries are also called <em>lexicons</em>, and dictionaries related to emotive feelings are often called <em>sentiment lexicons</em>.</p>
<p>Tidy Text’s <code>sentiments</code> dataset contains built-in sentiment lexicons. We can look at the structure of some of these:</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="text-analysis.html#cb398-1" aria-hidden="true" tabindex="-1"></a>afinn <span class="ot">&lt;-</span> <span class="fu">get_sentiments</span>(<span class="st">&quot;afinn&quot;</span>)</span>
<span id="cb398-2"><a href="text-analysis.html#cb398-2" aria-hidden="true" tabindex="-1"></a>nrc <span class="ot">&lt;-</span> <span class="fu">get_sentiments</span>(<span class="st">&quot;nrc&quot;</span>)</span>
<span id="cb398-3"><a href="text-analysis.html#cb398-3" aria-hidden="true" tabindex="-1"></a>bing <span class="ot">&lt;-</span> <span class="fu">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
word
</th>
<th style="text-align:left;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
abandon
</td>
<td style="text-align:left;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;">
abandoned
</td>
<td style="text-align:left;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;">
abandons
</td>
<td style="text-align:left;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;">
abducted
</td>
<td style="text-align:left;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;">
abduction
</td>
<td style="text-align:left;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;">
abductions
</td>
<td style="text-align:left;">
-2
</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left;">
word
</th>
<th style="text-align:left;">
sentiment
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
abacus
</td>
<td style="text-align:left;">
trust
</td>
</tr>
<tr>
<td style="text-align:left;">
abandon
</td>
<td style="text-align:left;">
fear
</td>
</tr>
<tr>
<td style="text-align:left;">
abandon
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
abandon
</td>
<td style="text-align:left;">
sadness
</td>
</tr>
<tr>
<td style="text-align:left;">
abandoned
</td>
<td style="text-align:left;">
anger
</td>
</tr>
<tr>
<td style="text-align:left;">
abandoned
</td>
<td style="text-align:left;">
fear
</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left;">
word
</th>
<th style="text-align:left;">
sentiment
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2-faces
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
abnormal
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
abolish
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
abominable
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
abominably
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
abominate
</td>
<td style="text-align:left;">
negative
</td>
</tr>
</tbody>
</table>
<p>Let’s take a look at the sentiments described within each lexicon:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="text-analysis.html#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the number of words and unique sentiments in each lexicon</span></span>
<span id="cb399-2"><a href="text-analysis.html#cb399-2" aria-hidden="true" tabindex="-1"></a>afinn <span class="sc">%&gt;%</span></span>
<span id="cb399-3"><a href="text-analysis.html#cb399-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_words =</span> <span class="fu">n</span>(), <span class="at">values =</span> <span class="fu">paste</span>(<span class="fu">sort</span>(<span class="fu">unique</span>(value)), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   num_words values                              
##       &lt;int&gt; &lt;chr&gt;                               
## 1      2477 -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="text-analysis.html#cb401-1" aria-hidden="true" tabindex="-1"></a>nrc <span class="sc">%&gt;%</span></span>
<span id="cb401-2"><a href="text-analysis.html#cb401-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_words =</span> <span class="fu">n</span>(), <span class="at">sentiments =</span> <span class="fu">paste</span>(<span class="fu">sort</span>(<span class="fu">unique</span>(sentiment)), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   num_words sentiments                                                                       
##       &lt;int&gt; &lt;chr&gt;                                                                            
## 1     13872 anger, anticipation, disgust, fear, joy, negative, positive, sadness, surprise, …</code></pre>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="text-analysis.html#cb403-1" aria-hidden="true" tabindex="-1"></a>bing <span class="sc">%&gt;%</span></span>
<span id="cb403-2"><a href="text-analysis.html#cb403-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_words =</span> <span class="fu">n</span>(), <span class="at">sentiments =</span> <span class="fu">paste</span>(<span class="fu">sort</span>(<span class="fu">unique</span>(sentiment)), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   num_words sentiments        
##       &lt;int&gt; &lt;chr&gt;             
## 1      6786 negative, positive</code></pre>
<p>The Tidy Text book has some great background on these data sets:</p>
<blockquote>
<p>The three general-purpose lexicons are</p>
<ul>
<li><code>AFINN</code> from <a href="http://www2.imm.dtu.dk/pubdb/views/publication_details.php?id=6010">Finn Årup Nielsen</a>,</li>
<li><code>bing</code> from <a href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html">Bing Liu and collaborators</a>, and</li>
<li><code>nrc</code> from <a href="http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm">Saif Mohammad and Peter Turney</a>.</li>
</ul>
<p>All three of these lexicons are based on unigrams, i.e., single words. These lexicons contain many English words and the words are assigned scores for positive/negative sentiment, and also possibly emotions like joy, anger, sadness, and so forth. The <code>nrc</code> lexicon categorizes words in a binary fashion (“yes”/“no”) into categories of positive, negative, anger, anticipation, disgust, fear, joy, sadness, surprise, and trust. The <code>bing</code> lexicon categorizes words in a binary fashion into positive and negative categories. The <code>AFINN</code> lexicon assigns words with a score that runs between -5 and 5, with negative scores indicating negative sentiment and positive scores indicating positive sentiment. All of this information is tabulated in the <code>sentiments</code> dataset, and tidytext provides a function <code>get_sentiments()</code> to get specific sentiment lexicons without the columns that are not used in that lexicon.</p>
</blockquote>
<p>To apply these dictionaries, we need to create a Tidy Text data frame with words for each row and join it to the dictionary scores. Let’s give this a try using the <a href="https://www.macalester.edu/about/mission/">Macalester Statement of Purpose and Belief</a>. We start by creating the Tidy Text data frame:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="text-analysis.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Declare a string containing the Macalester Statement of Purpose &amp; Belief</span></span>
<span id="cb405-2"><a href="text-analysis.html#cb405-2" aria-hidden="true" tabindex="-1"></a>statement <span class="ot">&lt;-</span> <span class="st">&quot;At Macalester College we believe that education is a fundamentally transforming experience. As a community of learners, the possibilities for this personal, social, and intellectual transformation extend to us all. We affirm the importance of the intellectual growth of the students, staff and faculty through individual and collaborative endeavor. We believe that this can best be achieved through an environment that values the diverse cultures of our world and recognizes our responsibility to provide a supportive and respectful environment for students, staff and faculty of all cultures and backgrounds.</span></span>
<span id="cb405-3"><a href="text-analysis.html#cb405-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb405-4"><a href="text-analysis.html#cb405-4" aria-hidden="true" tabindex="-1"></a><span class="st">We expect students to develop a broad understanding of the liberal arts while they are at Macalester. Students should follow a primary course of study in order to acquire an understanding of disciplinary theory and methodology; they should be able to apply their understanding of theories to address problems in the larger community. Students should develop the ability to use information and communication resources effectively, be adept at critical, analytical and logical thinking, and express themselves well in both oral and written forms. Finally, students should be prepared to take responsibility for their personal, social and intellectual choices.</span></span>
<span id="cb405-5"><a href="text-analysis.html#cb405-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb405-6"><a href="text-analysis.html#cb405-6" aria-hidden="true" tabindex="-1"></a><span class="st">We believe that the benefit of the educational experience at Macalester is the development of individuals who make informed judgments and interpretations of the broader world around them and choose actions or beliefs for which they are willing to be held accountable. We expect them to develop the ability to seek and use knowledge and experience in contexts that challenge and inform their suppositions about the world. We are committed to helping students grow intellectually and personally within an environment that models and promotes academic excellence and ethical behavior. The education a student begins at Macalester provides the basis for continuous transformation through learning and service.&quot;</span></span>
<span id="cb405-7"><a href="text-analysis.html#cb405-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb405-8"><a href="text-analysis.html#cb405-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Expand this into a tidy data frame, with one row per word</span></span>
<span id="cb405-9"><a href="text-analysis.html#cb405-9" aria-hidden="true" tabindex="-1"></a>tidy_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">college =</span> <span class="fu">c</span>(<span class="st">&quot;Macalester College&quot;</span>), <span class="at">text =</span> statement) <span class="sc">%&gt;%</span></span>
<span id="cb405-10"><a href="text-analysis.html#cb405-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text)</span>
<span id="cb405-11"><a href="text-analysis.html#cb405-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb405-12"><a href="text-analysis.html#cb405-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the data frame and the most popular words</span></span>
<span id="cb405-13"><a href="text-analysis.html#cb405-13" aria-hidden="true" tabindex="-1"></a>tidy_df</span></code></pre></div>
<pre><code>## # A tibble: 293 × 2
##    college            word         
##    &lt;chr&gt;              &lt;chr&gt;        
##  1 Macalester College at           
##  2 Macalester College macalester   
##  3 Macalester College college      
##  4 Macalester College we           
##  5 Macalester College believe      
##  6 Macalester College that         
##  7 Macalester College education    
##  8 Macalester College is           
##  9 Macalester College a            
## 10 Macalester College fundamentally
## # … with 283 more rows</code></pre>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="text-analysis.html#cb407-1" aria-hidden="true" tabindex="-1"></a>tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb407-2"><a href="text-analysis.html#cb407-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span></span>
<span id="cb407-3"><a href="text-analysis.html#cb407-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word)</span></code></pre></div>
<pre><code>## # A tibble: 105 × 2
##    word            n
##    &lt;chr&gt;       &lt;int&gt;
##  1 ability         2
##  2 academic        1
##  3 accountable     1
##  4 achieved        1
##  5 acquire         1
##  6 actions         1
##  7 address         1
##  8 adept           1
##  9 affirm          1
## 10 analytical      1
## # … with 95 more rows</code></pre>
<p>Next, we join this data frame with the lexicon. Let’s use nrc. Since we don’t care about words not in the lexicon, we will use an inner join.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="text-analysis.html#cb409-1" aria-hidden="true" tabindex="-1"></a>tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb409-2"><a href="text-analysis.html#cb409-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(nrc) <span class="sc">%&gt;%</span></span>
<span id="cb409-3"><a href="text-analysis.html#cb409-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sentiment)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 2
##   sentiment        n
##   &lt;chr&gt;        &lt;int&gt;
## 1 anger            1
## 2 anticipation    12
## 3 disgust          3
## 4 fear             1
## 5 joy              4
## 6 negative         3
## 7 positive        45
## 8 surprise         4
## 9 trust           25</code></pre>
<p>There are some odd sentiments for a mission statement (anger, disgust, fear, and negative). Let’s take a look at what words are contributing to them.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="text-analysis.html#cb411-1" aria-hidden="true" tabindex="-1"></a>tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb411-2"><a href="text-analysis.html#cb411-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(nrc) <span class="sc">%&gt;%</span></span>
<span id="cb411-3"><a href="text-analysis.html#cb411-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sentiment <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;anger&quot;</span>, <span class="st">&quot;disgust&quot;</span>, <span class="st">&quot;fear&quot;</span>, <span class="st">&quot;negative&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb411-4"><a href="text-analysis.html#cb411-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(word, sentiment)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 2
##   word       sentiment
##   &lt;chr&gt;      &lt;chr&gt;    
## 1 diverse    negative 
## 2 liberal    negative 
## 3 larger     disgust  
## 4 finally    disgust  
## 5 challenge  anger    
## 6 challenge  fear     
## 7 challenge  negative 
## 8 excellence disgust</code></pre>
<p>As you can see, word dictionaries are not perfect tools. When using them, make sure you look at the individual words contributing to the overall patterns to ensure they make sense.</p>
</div>
<div id="other-interesting-questions" class="section level3 unnumbered hasAnchor">
<h3>Other Interesting Questions<a href="text-analysis.html#other-interesting-questions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are all sorts of other interesting questions we can ask when analyzing texts. These include:</p>
<ul>
<li>How do word frequencies change over time (e.g., Twitter) or over the course of a text?</li>
<li>What is the correlation between different words (or names of characters in novels)? For example, how frequently do they appear in the same section of a text, or within <span class="math inline">\(K\)</span> number of words of each other?<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a></li>
<li>How can we visualize such co-occurrences with networks?</li>
<li>What “topics” are found in different documents? What word collections comprise these topics? This area is called <a href="http://tidytextmining.com/topicmodeling.html">topic modeling</a>.</li>
<li>Can you guess who wrote a document by analyzing its text?</li>
<li>How does the structure of different languages (e.g., sentence structure, sentence length, parts-of-speech) compare? These and many other interesting questions are asked by <a href="https://en.wikipedia.org/wiki/Computational_linguistics">computational linguists</a>.</li>
</ul>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="29">
<li id="fn29"><p>Instead of reading the file directly from the internet, it is often a good idea to first save it to your working directory through your browser, and then read it locally. The benefits of this include having the data backed-up in case the website changes, and being able to run your code if you are offline. The drawback is that if the website is updated and you actually want those changes to be reflected in your text analysis, you’ll have to download new versions periodically.<a href="text-analysis.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>See the help for <code>unnest_tokens</code> to learn more about options for the token.<a href="text-analysis.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>Check out the <code>widyr</code> package and its <code>pairwise_count()</code> function if interested in these and similar questions.<a href="text-analysis.html#fnref31" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sql.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
